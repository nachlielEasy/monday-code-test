(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{7966:(e,t,s)=>{let i=s(7625),{MONDAY_OAUTH_URL:n}=s(3420),{convertToArrayIfNeeded:r}=s(9079),{initScrollHelperIfNeeded:o}=s(8393),{initBackgroundTracking:a}=s(6182),{logWarnings:l}=s(934),d=[],h={GLOBAL:"v2",INSTANCE:"instance"};class c{constructor(e={}){this._clientId=e.clientId,this._apiToken=e.apiToken,this._apiVersion=e.apiVersion,this.listeners={},this.setClientId=this.setClientId.bind(this),this.setToken=this.setToken.bind(this),this.setApiVersion=this.setApiVersion.bind(this),this.api=this.api.bind(this),this.listen=this.listen.bind(this),this.get=this.get.bind(this),this.set=this.set.bind(this),this.execute=this.execute.bind(this),this.oauth=this.oauth.bind(this),this._receiveMessage=this._receiveMessage.bind(this),this.storage={setItem:this.setStorageItem.bind(this),getItem:this.getStorageItem.bind(this),deleteItem:this.deleteStorageItem.bind(this),instance:{setItem:this.setStorageInstanceItem.bind(this),getItem:this.getStorageInstanceItem.bind(this),deleteItem:this.deleteStorageInstanceItem.bind(this)}},window.addEventListener("message",this._receiveMessage,!1),e.withoutScrollHelper||o(),a(this)}setClientId(e){this._clientId=e}setToken(e){this._apiToken=e}setApiVersion(e){this._apiVersion=e}api(e,t={}){let s={query:e,variables:t.variables},n=t.token||this._apiToken,r=t.apiVersion||this._apiVersion;return(n?i.execute(s,n,{apiVersion:r}):this._localApi("api",{params:s,apiVersion:r}).then(e=>e.data)).then(l)}listen(e,t,s){let i=r(e),n=[];return i.forEach(e=>{n.push(this._addListener(e,t)),this._localApi("listen",{type:e,params:s})}),()=>{n.forEach(e=>e())}}get(e,t){return this._localApi("get",{type:e,params:t})}set(e,t){return this._localApi("set",{type:e,params:t})}execute(e,t){return this._localApi("execute",{type:e,params:t})}track(e,t){return this.execute("track",{name:e,data:t})}oauth(e={}){let t=e.clientId||this._clientId;if(!t)throw Error("clientId is required");let s=e.mondayOauthUrl||n,i=`${s}?client_id=${t}`;window.location=i}setStorageItem(e,t,s={}){return this._localApi("storage",{method:"set",key:e,value:t,options:s,segment:h.GLOBAL})}getStorageItem(e,t={}){return this._localApi("storage",{method:"get",key:e,options:t,segment:h.GLOBAL})}deleteStorageItem(e,t={}){return this._localApi("storage",{method:"delete",key:e,options:t,segment:h.GLOBAL})}setStorageInstanceItem(e,t,s={}){return this._localApi("storage",{method:"set",key:e,value:t,options:s,segment:h.INSTANCE})}getStorageInstanceItem(e,t={}){return this._localApi("storage",{method:"get",key:e,options:t,segment:h.INSTANCE})}deleteStorageInstanceItem(e,t={}){return this._localApi("storage",{method:"delete",key:e,options:t,segment:h.INSTANCE})}_localApi(e,t){return new Promise((i,n)=>{let r=this._generateRequestId(),o=this._clientId,a=s(7367).version;window.parent.postMessage({method:e,args:t,requestId:r,clientId:o,version:a},"*");let l=this._addListener(r,e=>{if(l(),e.errorMessage){let t=Error(e.errorMessage);t.data=e.data,n(t)}else i(e)})})}_receiveMessage(e){let{method:t,type:s,requestId:i}=e.data,n=new Set([...this.listeners[t]||d,...this.listeners[s]||d,...this.listeners[i]||d]);n&&n.forEach(t=>{try{t(e.data)}catch(e){console.error("Message callback error: ",e)}})}_addListener(e,t){return this.listeners[e]=this.listeners[e]||new Set,this.listeners[e].add(t),()=>{this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]}}_generateRequestId(){return Math.random().toString(36).substring(2,9)}_removeEventListener(){window.removeEventListener("message",this._receiveMessage,!1)}_clearListeners(){this.listeners=[]}}e.exports=function(e={}){return new c(e)}},3420:(e,t,s)=>{s(5606);let i=(e,t)=>t,n=()=>i("MONDAY_COM_PROTOCOL","https"),r=()=>i("MONDAY_COM_DOMAIN","monday.com"),o=()=>i("MONDAY_SUBDOMAIN_API","api."),a=()=>i("MONDAY_OAUTH_SUBDOMAIN","auth."),l=()=>`${n()}://${o()}${r()}/v2`,d=()=>`${n()}://${a()}${r()}/oauth2/authorize`,h=()=>`${n()}://${a()}${r()}/oauth2/token`;e.exports={get MONDAY_DOMAIN(){return r()},get MONDAY_PROTOCOL(){return n()},get MONDAY_API_URL(){return l()},get MONDAY_OAUTH_URL(){return d()},get MONDAY_OAUTH_TOKEN_URL(){return h()}}},9079:e=>{let t="undefined"!=typeof window&&void 0!==window.document;e.exports={convertToArrayIfNeeded:e=>Array.isArray(e)?e:[e],isBrowser:t}},934:e=>{e.exports={logWarnings:e=>{let t=e&&e.extensions&&e.extensions.warnings;return t&&Array.isArray(t)&&t.forEach(e=>{if(e&&e.message)try{let t=e.locations&&e.locations.map(e=>`line ${e.line}, column ${e.column}`).join("; "),s=e.path&&e.path.join(" â†’ "),i=e.message;i=(i=i.replace(/\.$/,"")).charAt(0).toLowerCase()+i.slice(1);let n=["[monday API]",`${s}:`,i,t&&`@ ${t}`,e.extensions?["\n\nAdditional details:",e.extensions]:void 0].flat().filter(Boolean);console.warn(...n)}catch(t){e&&console.warn("[monday API] Warning:",e)}}),e}}},8393:e=>{let t=!1;e.exports={initScrollHelperIfNeeded:function(){if(t)return;t=!0;let e=document.createElement("style");e.appendChild(document.createTextNode('body::before { content: ""; position: fixed; top: 0; right: 0; bottom: 0; left: 0; pointer-events: none; z-index: 2147483647; /* mondaySdk css - can be disabled with: mondaySdk({withoutScrollHelper: true }) */ }')),(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}}},7813:function(e,t,s){var i,n;let{isBrowser:r}=s(9079),o=s(r?7966:7018);"undefined"!=typeof self&&self,void 0!==(n="function"==typeof(i=function(){return"undefined"!=typeof __BUNDLE__&&__BUNDLE__&&(window.mondaySdk=o),o})?i.call(t,s,t,e):i)&&(e.exports=n)},5129:(e,t,s)=>{let i=s(3092);e.exports={nodeFetch:function(e,t={}){return i(e,t)}}},7625:(e,t,s)=>{e.exports=s(102)},102:(e,t,s)=>{let{MONDAY_API_URL:i,MONDAY_OAUTH_TOKEN_URL:n}=s(3420),r=s(5129),o="Could not parse JSON from monday.com's GraphQL API response",a="Token is required",l="Received timeout from monday.com's GraphQL API";async function d(e,t,s={}){if(!t&&s.url!==n)throw Error(a);let h=s.url||i,c=s.path||"",p=`${h}${c}`,u=await function(e,t,s,i={}){return r.nodeFetch(e,{method:i.method||"POST",body:JSON.stringify(t||{}),headers:{Authorization:s,"Content-Type":"application/json",...i.apiVersion?{"API-Version":i.apiVersion}:{}}})}(p,e,t,s),m=u.status,_=u.headers.get("content-type");if(!_||!_.includes("application/json")){if(504===m)throw Error(l);throw Error(await u.text())}try{return await u.json()}catch(e){throw Error(o)}}e.exports={execute:d,COULD_NOT_PARSE_JSON_RESPONSE_ERROR:o,TOKEN_IS_REQUIRED_ERROR:a,API_TIMEOUT_ERROR:l}},7018:(e,t,s)=>{let{logWarnings:i}=s(934),n=s(7625),{oauthToken:r}=s(3127);class o{constructor(e={}){this._token=e.token,this._apiVersion=e.apiVersion,this.setToken=this.setToken.bind(this),this.setApiVersion=this.setApiVersion.bind(this),this.api=this.api.bind(this)}setToken(e){this._token=e}setApiVersion(e){this._apiVersion=e}api(e,t={}){let s={query:e,variables:t.variables},r=t.token||this._token,o=t.apiVersion||this._apiVersion;if(!r)throw Error("Should send 'token' as an option or call mondaySdk.setToken(TOKEN)");return n.execute(s,r,{apiVersion:o}).then(i)}oauthToken(e,t,s){return r(e,t,s)}}e.exports=function(e={}){return new o(e)}},6182:e=>{let t=!1;e.exports={initBackgroundTracking:e=>{if(t)return;t=!0;let s=()=>{e.track("ping")};s(),setInterval(s,3e5)}}},3127:(e,t,s)=>{let{execute:i}=s(7625),{MONDAY_OAUTH_TOKEN_URL:n}=s(3420);e.exports={oauthToken:(e,t,s)=>i({code:e,client_id:t,client_secret:s},null,{url:n})}},9519:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/monday-app",function(){return s(8231)}])},8231:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var i=s(4848),n=s(6540),r=s(7813);let o=s.n(r)()();function a(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)([]);return(0,n.useEffect)(()=>{o.listen("context",e=>{t(e.data)}),o.api("\n      query {\n        boards {\n          name\n          id\n        }\n      }\n    ").then(e=>{r(e.data.boards)})},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Monday.com App"}),e&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"Context:"}),(0,i.jsx)("pre",{children:JSON.stringify(e,null,2)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"Boards:"}),(0,i.jsx)("ul",{children:s.map(e=>(0,i.jsx)("li",{children:e.name},e.id))})]})]})}},3092:(e,t,s)=>{"use strict";var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response},7367:e=>{"use strict";e.exports=JSON.parse('{"name":"monday-sdk-js","version":"0.5.6","private":false,"repository":"https://github.com/mondaycom/monday-sdk-js","main":"src/index.js","types":"types/index.d.ts","author":"talharamati <tal@monday.com>","license":"MIT","files":["LICENSE","README.md","dist/","src/","types/","server-sdk.js"],"dependencies":{"node-fetch":"^2.6.0"},"devDependencies":{"@babel/cli":"^7.6.0","@babel/core":"^7.6.0","@babel/node":"^7.6.1","@babel/preset-env":"^7.6.0","@babel/preset-react":"^7.0.0","@babel/register":"^7.6.0","@types/source-map":"^0.5.2","babel-loader":"^8.0.6","chai":"^4.2.0","eslint":"^6.8.0","jsdom":"^16.2.0","mocha":"^7.1.0","prettier":"^1.19.1","sinon":"^9.0.0","sinon-chai":"^3.5.0","typescript":"^4.9.5","webpack":"^4.38.0","webpack-cli":"^3.3.6","webpack-dev-server":"^3.7.2"},"scripts":{"start":"webpack-dev-server","build":"webpack --mode=production --env.WEBPACK_BUILD=true","test":"mocha \'./src/**/*-test.js\'","test:watch":"mocha \'./src/**/*-test.js\' --watch","precommit":"yarn lint && yarn style-check","lint":"eslint \'./src/**/*.*\'","style-check":"prettier --check \'./src/**/*.js\'","style-fix":"prettier --write \'./src/**/*.js\'","compile-types":"tsc --noEmit"}}')}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(9519)),_N_E=e.O()}]);